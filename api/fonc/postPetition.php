<?phpfunction apiSignPetition(&$usr, $params, $server_path){	$rel = isset($server_path) ? $server_path : '../../../';	include_once $rel.'globals/env.php';	include_once $rel.'globals/conventions.php';	include_once $rel.'services/post.php';	include_once $rel.'utils/json.php';	include_once $rel.'utils/secureVars.php';	include_once 'utils/extra_data.php';		$env = setEnv();		saveExtraDatas($usr, $params);	$type = isset($params["type"]) ? (isRessourceType($params["type"]) ? $params["type"] : null) : null;	$id = safe_int(isset($params["id"]) ? $params["id"] : null);	$mail = string_max_lenght( safe_string(isset($params["mail"]) ? $params["mail"] : null), $env['mailMaxSize'] );	$prenom = string_max_lenght( safe_string(isset($params["prenom"]) ? $params["prenom"] : null), $env['prenomMaxSize'] );	$nom = string_max_lenght( safe_string(isset($params["nom"]) ? $params["nom"] : null), $env['nomMaxSize'] );	$genre = isset($params["genre"]) ? (isGenre($params["genre"]) ? $params["genre"] : null) : null;	$i_age = safe_int(isset($params["age"]) ? (isAge($params["age"]) ? $params["age"] : null) : null);	$site = string_max_lenght( safe_string(isset($params["site"]) ? $params["site"] : null), $env['siteMaxSize'] );	$profession = string_max_lenght( safe_string(isset($params["profession"]) ? $params["profession"] : null), $env['professionMaxSize'] );	$zipcode = string_max_lenght( safe_string(isset($params["zipcode"]) ? $params["zipcode"] : null), $env['zipcodeMaxSize'] );	$message = string_max_lenght( safe_string(isset($params["message"]) ? $params["message"] : null), $env['messageMaxSize'] );		if($type != null && $id != null && $mail != null && $prenom != null && $nom != null){		$ret = postSignPetition($usr, $type, $id, $mail, $prenom, $nom, $genre, $i_age, $site, $profession, $zipcode, $message);		return createErrorJson($usr, $ret);	} else{ return createErrorJson($usr, 400); } // paramètres incorrects}function apiValidPetition(&$usr, $params, $server_path){	$rel = isset($server_path) ? $server_path : '../../../';	include_once $rel.'services/post.php';	include_once $rel.'utils/json.php';	include_once $rel.'utils/secureVars.php';	include_once 'utils/extra_data.php';		saveExtraDatas($usr, $params);	$confirmCode = string_max_lenght( safe_string(isset($params["confirm"]) ? $params["confirm"] : null), 40 );		if($confirmCode != null){		$ret = postValidPetition($usr, $confirmCode);		return createErrorJson($usr, $ret);	} else{ return createErrorJson($usr, 400); } // paramètres incorrects}?>