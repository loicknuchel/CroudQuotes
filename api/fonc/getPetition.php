<?phpfunction apiGetPetition(&$usr, $params, $server_path){	$rel = isset($server_path) ? $server_path : '../../../';	include_once $rel.'globals/conventions.php';	include_once $rel.'services/get.php';	include_once $rel.'utils/json.php';	include_once $rel.'utils/secureVars.php';	include_once 'utils/extra_data.php';		saveExtraDatas($usr, $params);	$elt_type = isset($params["type"]) ? (isRessourceType($params["type"]) ? $params["type"] : null) : null;	$id = safe_int(isset($params["id"]) ? $params["id"] : null);	$p = isset($params["p"]) ? ($params["p"] == 'all' ? $params["p"] : safe_int($params["p"])) : '1';		if($elt_type != null && $id != null){		if($p == 'all'){ $pages = 1; }		else{			$pages = getTotalPetitionPages($usr, $elt_type, $id);			if($p > $pages){$p = $pages;}		}				$petition_result = getPetition($usr, $elt_type, $id, $p);		if($p == 'all'){$p = 1;}		return createPetitionJson($usr, $elt_type, $id, $petition_result, $p, $pages);	} else{ return createErrorJson($usr, 400); } // paramètres incorrects}?>